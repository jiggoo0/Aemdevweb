@import "tailwindcss";
@plugin "tailwindcss-animate";

/**
 * [CORE STYLESHEET]: AEM-SYSTEM-v17.3.9 (HYBRID_STABILIZED)
 * [STRATEGY]: Variable-Based Theming + GPU Accelerated Physics
 * [MAINTAINER]: AEMDEVWEB Specialist Team
 */

/* --- 01. BASE VARIABLES LAYER (Theme Logic) --- */
@layer base {
  :root {
    /* [DEFAULT: DARK MODE] */
    --font-thai: var(--font-thai), ui-sans-serif, system-ui, sans-serif;
    --font-sans: var(--font-sans), ui-sans-serif, system-ui, sans-serif;

    /* Color Palette - Dark */
    --color-brand-primary: oklch(0.72 0.18 150); 
    --color-brand-glow-base: oklch(0.72 0.18 150 / 0.15);
    --color-surface-main: #050505;
    --color-surface-offset: #0a0a0a;
    --color-surface-card: #0f0f0f;
    --color-text-primary: #ffffff;
    --color-text-secondary: #a1a1aa;
    --color-text-inverted: #000000;
    --color-border: rgba(255, 255, 255, 0.1);
    
    /* Physics Variables */
    --shadow-glow-color: var(--color-brand-glow-base);
    --ambient-opacity: 0.1;
  }

  :root[data-theme="light"] {
    /* [LIGHT MODE OVERRIDE] */
    --color-surface-main: #ffffff;
    --color-surface-offset: #f4f4f5;
    --color-surface-card: #ffffff;
    --color-text-primary: #18181b;
    --color-text-secondary: #52525b;
    --color-text-inverted: #ffffff;
    --color-border: rgba(24, 24, 27, 0.1);
    
    /* Light Mode Physics */
    --shadow-glow-color: rgba(0, 0, 0, 0.08);
    --ambient-opacity: 0.03;
  }
}

/* --- 02. TAILWIND CONFIGURATION LAYER (v4) --- */
@theme {
  --font-thai: var(--font-thai);
  --font-sans: var(--font-sans);

  --color-brand-primary: var(--color-brand-primary);
  --color-brand-glow: var(--color-brand-glow-base);
  --color-surface-main: var(--color-surface-main);
  --color-surface-offset: var(--color-surface-offset);
  --color-surface-card: var(--color-surface-card);
  --color-text-primary: var(--color-text-primary);
  --color-text-secondary: var(--color-text-secondary);
  --color-text-inverted: var(--color-text-inverted);
  --color-border: var(--color-border);

  /* GPU Accelerated Keyframes */
  --animate-pulse-slow: pulse-slow 4s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  --animate-float: float 6s ease-in-out infinite;
  --animate-shimmer: shimmer 2.5s linear infinite;

  @keyframes pulse-slow {
    0%, 100% { opacity: 0.4; transform: translate3d(0,0,0); }
    50% { opacity: 0.1; }
  }
  @keyframes float {
    0%, 100% { transform: translate3d(0, 0, 0); }
    50% { transform: translate3d(0, -10px, 0); }
  }
  @keyframes shimmer {
    0% { transform: translate3d(-100%, 0, 0); }
    100% { transform: translate3d(100%, 0, 0); }
  }
}

/* --- 03. BASE LAYER RESET (Performance Optimization) --- */
@layer base {
  *, ::after, ::before {
    @apply border-border transition-colors duration-500;
    box-sizing: border-box;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
  }

  html {
    @apply scroll-smooth;
    scrollbar-gutter: stable; /* CLS Shield */
  }

  body {
    @apply text-text-primary font-thai bg-surface-main overflow-x-hidden;
    min-height: 100vh;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-sans tracking-tight text-text-primary;
    content-visibility: auto; /* LCP Fix */
  }

  ::-webkit-scrollbar-track { background: var(--color-surface-main); }
  ::-webkit-scrollbar-thumb { 
    background: var(--color-border); 
    border-radius: 9999px;
  }
}

/* --- 04. UTILITY LAYER (Infrastructural Specialist) --- */
@layer utilities {
  .container {
    @apply mx-auto w-full max-w-[85rem] px-4 md:px-6;
  }

  /* Specialist Interaction Node */
  .hover-lift {
    @apply transition-transform duration-500 will-change-transform;
    &:hover { 
      transform: translate3d(0, -4px, 0); 
    }
  }

  .glass-morphism {
    @apply border border-border/50 bg-surface-main/10 shadow-2xl backdrop-blur-xl;
    transform: translate3d(0,0,0); /* Force GPU Layer */
  }

  .bg-infrastructure-grid {
    background-size: 40px 40px;
    background-image:
      linear-gradient(to right, var(--color-border) 1px, transparent 1px),
      linear-gradient(to bottom, var(--color-border) 1px, transparent 1px);
    /* [MANDATE]: ใช้ mask-image เพื่อสร้างขอบที่นุ่มนวลและลด Visual Noise */
    mask-image: radial-gradient(ellipse at center, black 40%, transparent 80%);
    contain: strict;
    transform: translate3d(0,0,0);
  }

  .ambient-aura {
    @apply pointer-events-none fixed z-0 rounded-full mix-blend-screen blur-[100px];
    opacity: var(--ambient-opacity);
    will-change: transform, opacity;
    transform: translate3d(0,0,0);
  }

  .shadow-glow {
    box-shadow: 0 0 30px -5px var(--shadow-glow-color);
  }
}
