@import "tailwindcss";
@plugin "tailwindcss-animate";

/**
 * [CORE STYLESHEET]: AEM-SYSTEM-v17.9.1 (STABILIZED_VIEWPORT)
 * [STRATEGY]: Zero-Flash Overscroll | Hardened Background | GPU Acceleration
 * [MAINTAINER]: AEMDEVWEB Specialist Team
 */

/* --- 01. BASE VARIABLES LAYER --- */
@layer base {
  :root {
    /* [TYPOGRAPHY SYSTEM] */
    --font-thai: "IBM Plex Sans Thai", sans-serif;
    --font-sans: "Inter", sans-serif;
    --font-mono: "JetBrains Mono", monospace;

    /* [COLOR PALETTE - OKLCH SYSTEM] */
    --color-brand-primary: oklch(0.72 0.18 150);
    --color-brand-secondary: oklch(0.6 0.15 150);
    --color-brand-glow-base: oklch(0.72 0.18 150 / 0.15);

    /* Surface Palette: High Contrast Dark Mode Foundation */
    --color-surface-main: #050505;
    --color-surface-offset: #0a0a0a;
    --color-surface-card: #0f0f0f;

    /* Content Palette */
    --color-text-primary: #ffffff;
    --color-text-secondary: #a1a1aa;
    --color-text-muted: #52525b;
    --color-text-inverted: #000000;

    --color-border: rgba(255, 255, 255, 0.1);

    /* Physics & Atmosphere */
    --shadow-glow-color: var(--color-brand-glow-base);
    --ambient-opacity: 0.1;
  }

  :root[data-theme="light"] {
    --color-surface-main: #ffffff;
    --color-surface-offset: #f8fafc;
    --color-surface-card: #ffffff;
    --color-text-primary: #0f172a;
    --color-text-secondary: #475569;
    --color-text-muted: #94a3b8;
    --color-text-inverted: #ffffff;
    --color-border: rgba(15, 23, 42, 0.08);
    --shadow-glow-color: rgba(0, 0, 0, 0.05);
    --ambient-opacity: 0.03;
  }
}

/* --- 02. TAILWIND CONFIGURATION LAYER (v4 Engine) --- */
@theme {
  --font-thai: var(--font-thai);
  --font-sans: var(--font-sans);
  --font-mono: var(--font-mono);

  --color-brand-primary: var(--color-brand-primary);
  --color-brand-secondary: var(--color-brand-secondary);
  --color-brand-glow: var(--color-brand-glow-base);

  --color-surface-main: var(--color-surface-main);
  --color-surface-offset: var(--color-surface-offset);
  --color-surface-card: var(--color-surface-card);

  --color-text-primary: var(--color-text-primary);
  --color-text-secondary: var(--color-text-secondary);
  --color-text-muted: var(--color-text-muted);
  --color-text-inverted: var(--color-text-inverted);

  --color-border: var(--color-border);

  --shadow-glow: 0 0 20px -5px var(--shadow-glow-color);
  --shadow-pro-sm: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  --shadow-pro-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);

  --animate-pulse-slow: pulse-slow 4s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  --animate-float: float 6s ease-in-out infinite;
  --animate-shimmer: shimmer 2.5s linear infinite;

  @keyframes pulse-slow {
    0%,
    100% {
      opacity: 0.4;
      transform: translate3d(0, 0, 0);
    }
    50% {
      opacity: 0.1;
    }
  }
  @keyframes float {
    0%,
    100% {
      transform: translate3d(0, 0, 0);
    }
    50% {
      transform: translate3d(0, -10px, 0);
    }
  }
  @keyframes shimmer {
    0% {
      transform: translate3d(-100%, 0, 0);
    }
    100% {
      transform: translate3d(100%, 0, 0);
    }
  }
}

/* --- 03. BASE LAYER RESET (Critical Anti-Flash & Performance) --- */
@layer base {
  *,
  ::after,
  ::before {
    @apply border-border;
    box-sizing: border-box;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  html {
    @apply scroll-smooth;
    scrollbar-gutter: stable;

    /* [FIX 1]: บังคับพื้นหลังดำระดับ Kernel เพื่อป้องกัน White Flash ก่อนตัวแปรจะโหลด */
    background-color: #050505;

    /* [FIX 2]: หยุดพฤติกรรม Rubber-banding บน Mobile เพื่อไม่ให้เห็นขอบสีขาว */
    overscroll-behavior-y: none;

    height: 100%;
  }

  body {
    /* [FIX 3]: Sync พื้นหลังกับตัวแปรหลักและป้องกันการเลื่อนแกน X */
    @apply text-text-primary bg-surface-main overflow-x-hidden;
    font-family: var(--font-thai);
    line-height: 1.6;
    min-height: 100vh;
    width: 100%;
    position: relative;
    font-feature-settings: "ss01", "ss02", "cv01", "cv02", "tnum", "pnum";
  }

  /* Typography Logic */
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply text-text-primary font-bold tracking-tight;
    font-family: var(--font-sans);
    line-height: 1.2;
    text-wrap: balance;
  }

  /* Custom Professional Scrollbar */
  ::-webkit-scrollbar {
    width: 8px;
  }
  ::-webkit-scrollbar-track {
    background: var(--color-surface-main);
  }
  ::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 9999px;
    &:hover {
      background: var(--color-text-secondary);
    }
  }
}

/* --- 04. UTILITY LAYER: Specialist Infrastructure --- */
@layer utilities {
  .container {
    @apply mx-auto w-full max-w-[85rem] px-4 md:px-6;
  }

  .glass-morphism {
    @apply border-border/50 bg-surface-main/10 border shadow-2xl backdrop-blur-xl;
  }

  .bg-infrastructure-grid {
    background-size: 40px 40px;
    background-image:
      linear-gradient(to right, var(--color-border) 1px, transparent 1px),
      linear-gradient(to bottom, var(--color-border) 1px, transparent 1px);
    mask-image: radial-gradient(ellipse at center, black 40%, transparent 80%);
    contain: strict;
    transform: translate3d(0, 0, 0); /* บังคับใช้ GPU Acceleration */
  }

  .ambient-aura {
    @apply pointer-events-none fixed z-0 rounded-full mix-blend-screen blur-[100px];
    opacity: var(--ambient-opacity);
    will-change: transform, opacity;
    transform: translate3d(0, 0, 0);
  }
}
